#  Test meta-module inheritance

RUNS ./scbi iset-supermod

CLEAN-DIFF <<EOF
iset-supermod-setup is a function
iset-supermod-setup ()
{
    local PREFIX=\$1;
    local TARGET=\$2;
    mkdir -p \$PREFIX;
    echo do setup >> \$PREFIX/supermod
}
iset-supermod-wrapup is a function
iset-supermod-wrapup ()
{
    local PREFIX=\$1;
    local TARGET=\$2;
    echo do wrapup >> \$PREFIX/supermod
}
xxxx/xx/xx xx:xx:xx : Building iset-supermod [default] (n/a)
xxxx/xx/xx xx:xx:xx : native x86_64-linux-gnu
xxxx/xx/xx xx:xx:xx : steps : setup config build install wrapup
xxxx/xx/xx xx:xx:xx : no sources (vcs or tar)
xxxx/xx/xx xx:xx:xx : setup starting
xxxx/xx/xx xx:xx:xx : setup completed
xxxx/xx/xx xx:xx:xx : wrapup starting
xxxx/xx/xx xx:xx:xx : wrapup completed
xxxx/xx/xx xx:xx:xx : copy install into <sandbox>/install
xxxx/xx/xx xx:xx:xx : End Building iset-supermod [default] (n/a)
EOF

RUNS ./scbi i-supermod

CLEAN-DIFF <<EOF
i-supermod-best-plan is a function
i-supermod-best-plan ()
{
    echo var
}
i-supermod-modules is a function
i-supermod-modules ()
{
    echo lib1;
    echo lib2
}
i-supermod-setup is a function
i-supermod-setup ()
{
    local PREFIX=\$1;
    local TARGET=\$2;
    mkdir -p \$PREFIX;
    echo do setup >> \$PREFIX/supermod
}
i-supermod-wrapup is a function
i-supermod-wrapup ()
{
    local PREFIX=\$1;
    local TARGET=\$2;
    echo do wrapup >> \$PREFIX/supermod
}
xxxx/xx/xx xx:xx:xx : Metamodule i-supermod [default] setup
xxxx/xx/xx xx:xx:xx : setup starting
xxxx/xx/xx xx:xx:xx : setup completed
xxxx/xx/xx xx:xx:xx : End metamodule i-supermod [default] setup

xxxx/xx/xx xx:xx:xx : Metamodule i-supermod [default] wrapup
xxxx/xx/xx xx:xx:xx : wrapup starting
xxxx/xx/xx xx:xx:xx : wrapup completed
xxxx/xx/xx xx:xx:xx : End metamodule i-supermod [default] wrapup
EOF
