
#  Check that we take only the first variant

LDIR=.root/builds/pmorph/build/logs

RUNS ./scbi pmorph/a.b

CLEAN-DIFF <<EOF
xxxx/xx/xx xx:xx:xx : Building pmorph [a b] (n/a)
xxxx/xx/xx xx:xx:xx : native x86_64-linux-gnu
xxxx/xx/xx xx:xx:xx : steps : setup config build install wrapup
xxxx/xx/xx xx:xx:xx : no sources (vcs or tar)
xxxx/xx/xx xx:xx:xx : trigger: not yet built
xxxx/xx/xx xx:xx:xx : a-config [a b] starting
xxxx/xx/xx xx:xx:xx : a-config [a b] completed
xxxx/xx/xx xx:xx:xx : End Building pmorph [a b] (n/a)
EOF

GREP "CONFIG a" $LDIR/*config.log

RUNS ./scbi pmorph/b.a

CLEAN-DIFF <<EOF
xxxx/xx/xx xx:xx:xx : Building pmorph [b a] (n/a)
xxxx/xx/xx xx:xx:xx : native x86_64-linux-gnu
xxxx/xx/xx xx:xx:xx : steps : setup config build install wrapup
xxxx/xx/xx xx:xx:xx : no sources (vcs or tar)
xxxx/xx/xx xx:xx:xx : trigger: not yet built
xxxx/xx/xx xx:xx:xx : b-config [b a] starting
xxxx/xx/xx xx:xx:xx : b-config [b a] completed
xxxx/xx/xx xx:xx:xx : End Building pmorph [b a] (n/a)
EOF

GREP "CONFIG b" $LDIR/*config.log

RUNS ./scbi pmorph

CLEAN-DIFF <<EOF
xxxx/xx/xx xx:xx:xx : Building pmorph [default] (n/a)
xxxx/xx/xx xx:xx:xx : native x86_64-linux-gnu
xxxx/xx/xx xx:xx:xx : steps : setup config build install wrapup
xxxx/xx/xx xx:xx:xx : no sources (vcs or tar)
xxxx/xx/xx xx:xx:xx : trigger: not yet built
xxxx/xx/xx xx:xx:xx : default-config starting
xxxx/xx/xx xx:xx:xx : default-config completed
xxxx/xx/xx xx:xx:xx : End Building pmorph [default] (n/a)
EOF

GREP "CONFIG default" $LDIR/*config.log

RUNS ./scbi pmorph/z

CLEAN-DIFF <<EOF
xxxx/xx/xx xx:xx:xx : Building pmorph [z] (n/a)
xxxx/xx/xx xx:xx:xx : native x86_64-linux-gnu
xxxx/xx/xx xx:xx:xx : steps : setup config build install wrapup
xxxx/xx/xx xx:xx:xx : no sources (vcs or tar)
xxxx/xx/xx xx:xx:xx : trigger: not yet built
xxxx/xx/xx xx:xx:xx : config [z] starting
xxxx/xx/xx xx:xx:xx : config [z] completed
xxxx/xx/xx xx:xx:xx : End Building pmorph [z] (n/a)
EOF

GREP "CONFIG (none)" $LDIR/*config.log

RUNS ./scbi pmorph/z.a

CLEAN-DIFF <<EOF
xxxx/xx/xx xx:xx:xx : Building pmorph [z a] (n/a)
xxxx/xx/xx xx:xx:xx : native x86_64-linux-gnu
xxxx/xx/xx xx:xx:xx : steps : setup config build install wrapup
xxxx/xx/xx xx:xx:xx : no sources (vcs or tar)
xxxx/xx/xx xx:xx:xx : trigger: not yet built
xxxx/xx/xx xx:xx:xx : a-config [z a] starting
xxxx/xx/xx xx:xx:xx : a-config [z a] completed
xxxx/xx/xx xx:xx:xx : End Building pmorph [z a] (n/a)
EOF

GREP "CONFIG a" $LDIR/*config.log
