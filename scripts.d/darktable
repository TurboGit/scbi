
function darktable-vcs()
{
    echo git
    echo http://github.com/darktable-org/darktable.git
}

function darktable-config()
{
    PREFIX=$1
    TARGET=$2

    if [ -d "$GINST" ]; then
        GPOPTS="-DGPHOTO2CONFIG_EXECUTABLE=$GINST/bin/gphoto2-config \
        -DGPHOTO2_INCLUDE_DIR=$GINST/include \
        -DGPHOTO2_LIBRARY=$GINST/lib/libgphoto2.so \
        -DGPHOTO2_PORT_LIBRARY=$GINST/lib/libgphoto2_port.so"
    fi

    (
        system-compiler

        mkdir -p build/.oot-build &&
        cd build/.oot-build &&
            cmake ../../src -DCMAKE_BUILD_TYPE=Release $GPOPTS \
	          -DCMAKE_INSTALL_PREFIX=$PREFIX \
	          -DINSTALL_IOP_EXPERIMENTAL=On
    )
}

function darktable-build()
{
    PREFIX=$1
    TARGET=$2

    (
        system-compiler

        cd build/.oot-build && make -j4
    )
}

function darktable-install()
{
    PREFIX=$1
    TARGET=$2

    (
        system-compiler

        cd build/.oot-build && make install
    )
}

function darktable-prefix()
{
    echo /opt/darktable
}
