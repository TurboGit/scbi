
function mingw-env()
{
    PREFIX=$1
    TARGET=$2

    target-env $BDIR/pgcc/install $TARGET
}

function mingw-depends()
{
    echo mingw-header
    echo pgcc
}

function mingw-setup()
{
    PREFIX=$1
    TARGET=$2

    case $TARGET in
	*mingw*)
            ln -s $BDIR/mingw-header/src .
	    ;;
	*)
            echo $TARGET not supported for mingw.
            return 1
	    ;;
    esac
}

function mingw-out-of-tree()
{
    echo true
}

function mingw-config()
{
    PREFIX=$1
    TARGET=$2

    ../src/mingw-w64-crt/configure \
	--prefix=$PREFIX/$TARGET --host=$TARGET --target=$TARGET
}

function mingw-build()
{
    PREFIX=$1
    TARGET=$2

    #  First fix makefile, we cannot build winrt/libruntimeobject.a on
    #  lib32 not lib64.

    sed -i 's/^winrt32_DATA/#winrt32_DATA/' Makefile
    sed -i 's/^winrt64_DATA/#winrt64_DATA/' Makefile

    make -j4
}

function mingw-install()
{
    PREFIX=$1
    TARGET=$2

    make install
}
