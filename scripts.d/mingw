
function mingw-depends()
{
    echo mingw-header
    echo pgcc
}

function mingw-setup()
{
    PREFIX=$1
    TARGET=$2

    case $TARGET in
	*mingw*)
            ln -s $BDIR/mingw-header/src .
	    ;;
	*)
            echo $TARGET not supported for mingw.
            return 1
	    ;;
    esac
}

function mingw-config()
{
    PREFIX=$1
    TARGET=$2

    #  set PATH to pick-up the partial C compiler just built and which is
    #  needed to build the mingw runtime. Also set target-env to the mingw
    #  header just built.

    (
	target-env $BDIR/mingw-header/install $TARGET

        mkdir -p build/.oot-build &&
	    cd build/.oot-build &&
            PATH=$BDIR/pgcc/install/$TARGET/bin:$PATH &&
            $BDIR/mingw/src/mingw-w64-crt/configure \
	        --prefix=$PREFIX/$TARGET --host=$TARGET \
                --target=$TARGET
    )
}

function mingw-build()
{
    PREFIX=$1
    TARGET=$2

    ilog mingw build mingrt

    (
	target-env $BDIR/mingw-header/install $TARGET

        cd build/.oot-build &&
            PATH=$BDIR/pgcc/install/$TARGET/bin:$PATH &&
            make -j4
    )
}

function mingw-install()
{
    PREFIX=$1
    TARGET=$2

    cd build/.oot-build && make install
}
