
function binutils-update()
{
    PREFIX=$1
    TARGET=$2

    git_co git://sourceware.org/git/binutils.git binutils

    cd $GREPO/binutils && git checkout master && git pull
}

function binutils-setup()
{
    PREFIX=$1
    TARGET=$2

    mkdir -p $BDIR/binutils/$TARGET

    if [ ! -d src ]; then
        ln -s $GREPO/binutils src
    fi
}

function binutils-config()
{
    PREFIX=$1
    TARGET=$2

    no-target-env

    CONF_OPT="--prefix=$PREFIX --disable-multilib --disable-gdb"

    if [ $HOST == $TARGET ]; then
	cd $TARGET && ../src/configure --build=$HOST $CONF_OPT
    else
	cd $TARGET && ../src/configure --target=$TARGET $CONF_OPT
    fi
}

function binutils-build()
{
    PREFIX=$1
    TARGET=$2

    cd $TARGET && make -j6
}

function binutils-install()
{
    PREFIX=$1
    TARGET=$2

    cd $TARGET && make install
}
