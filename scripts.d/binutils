
function binutils-vcs()
{
    echo git
    echo http://sourceware.org/git/binutils-gdb.git
}

function binutils-out-of-tree()
{
    echo true
}

function binutils-build-env()
{
    system-compiler
}

function binutils-version()
{
    PREFIX=$1
    TARGET=$2

    TOOL=ld

    if [ $HOST != $TARGET ]; then
        TOOL=${TARGET}-ld
    fi

    if [ "$(which $TOOL)" = "" ]; then
        echo $VERSION_ERROR
    else
        echo $($TOOL --version | head -1 | cut -d' ' -f5)
    fi
}

function binutils-config()
{
    PREFIX=$1
    TARGET=$2

    CONF_OPT="--prefix=$PREFIX --disable-multilib --disable-gdb"

    if [ $HOST == $TARGET ]; then
	../src/configure --build=$HOST $CONF_OPT
    else
	../src/configure --target=$TARGET $CONF_OPT
    fi
}

function binutils-build()
{
    PREFIX=$1
    TARGET=$2

    make -j6
}

function binutils-install()
{
    PREFIX=$1
    TARGET=$2

    make install &&
        if [ $HOST != $TARGET ]; then
            # install into the partial gcc compiler too
            mkdir -p $BDIR/pgcc/install/
            rsync -a ../install/. $BDIR/pgcc/install/
        fi
}
