
#  A partial GCC C compiler for building a minimum runtime
#  used to build a mingw32 cross-compiler

function pgcc-config()
{
    PREFIX=$1
    TARGET=$2

    (
        cd $TARGET &&
            CFLAGS="-O1" $BDIR/gnat/src/configure \
                  --target=$TARGET --prefix=$PREFIX/$TARGET --build=$HOST \
	          --enable-thread=win32 --disable-nls --disable-multilib \
                  --disable-libada --disable-sjlj-exceptions \
                  --enable-languages=c
    )
}

function pgcc-build()
{
    PREFIX=$1
    TARGET=$2

    (
	no-target-env

        # The make will fail, but we install the partial C compiler
        # which is sufficient to build the MingW runtime.

	cd $TARGET && make -j2
    )

    return 0
}

function pgcc-install()
{
   (
	no-target-env

        # The make will fail, but we install the partial C compiler
        # which is sufficient to build the MingW runtime.

	cd $TARGET && make -k install
   )

    return 0
}
